#!/usr/local/bin/node
// Generated by CoffeeScript 1.7.1
(function() {
  var config, error, headers, http, options, postObject, postString, query, req;

  try {
    config = require('./config.json');
  } catch (_error) {
    error = _error;
    console.log("Error reading config.json");
    process.exit(1);
  }

  http = require('http');

  query = [];

  process.argv.forEach(function(val, index) {
    if (index > 1) {
      return query.push(val);
    }
  });

  postObject = {
    query: query.join(' ')
  };

  postString = JSON.stringify(postObject);

  headers = {
    'Content-Type': 'application/json',
    'Content-Length': postString.length
  };

  options = {
    host: config.host,
    port: config.port,
    path: '/',
    method: 'POST',
    headers: headers
  };

  req = http.request(options, function(res) {
    return res.on('data', function(chunk) {
      return console.log('' + chunk);
    });
  });

  req.write(postString);

  req.end();

}).call(this);
