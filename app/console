#!/usr/local/bin/node

// Generated by CoffeeScript 1.7.1
var args, command, commandName, e, opts;

args = [];

opts = {};

try {
  global.config = require('./config.json');
} catch (_error) {
  e = _error;
  console.log("Error reading config.json");
  process.exit(1);
}

process.argv.slice(2).forEach(function(value) {
  var option, splitValue;
  splitValue = value.split('=');
  if (splitValue.length > 1) {
    if (splitValue[0].indexOf('--' === 0)) {
      option = splitValue[0].substr(2);
      return opts[option] = splitValue[1];
    }
  } else {
    return args.push(value);
  }
});

commandName = args.shift();

if (commandName === void 0) {
  console.log("Please specifiy a command (eg: 'api') as the first argument");
  process.exit(1);
}

try {
  command = require("./.console/" + commandName);
} catch (_error) {
  e = _error;
  console.log("Not a valid command: '" + commandName + "' - type 'app/console help' for help");
  process.exit(1);
}

(new command(args, opts)).execute();
